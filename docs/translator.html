<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Testing form</title>
    <style> 
    </style>
</head>
  <body>
    <img src=""><br><br>
    <label for="VALUE">PÃ­smena</label>
    <input type="text" id="VALUE" name="VALUE"><br><br>
    <label for="cars">Typ:</label>

    <select id="type">
      <option value="base3">3-soustava</option>
      <option value="base4">4-soustava</option>
      <option value="base3plus2">3-soustava + 2</option>
    </select>

    <br><br>

    <button id="submit" onclick="Clicked()">Submit</button><br><br>
    <span id="output"></span>

  <script>

    var letterToNumber = function(letter) {
      var code = letter.charCodeAt(0);
      if(code >= 65 && code <= 90){
        return code - 65 + 1;
      }
      else if(code >= 97 && code <= 122){
        return code - 97 + 1;
      }
      else{
        return -1;
      }
    };

    var textToArray = function(text) {
      var result = [];
      for(var i = 0; i < text.length; i++){
        result.push(letterToNumber(text.charAt(i)));
      }
      return result;
    };

    var decimalToBase = function(value, base, targetDigits , modifier) {
      if(value < 0){
        return "error";
      }
      var result = "";
      while(value > 0){
        var remainder = value % base;
        result = remainder.toString() + result;
        value = Math.floor(value / base);
      }
      if(result == ""){
        result = "0";
      }
      if(targetDigits != undefined){
        while(result.length < targetDigits){
          result = "0" + result;
        }
      }
      return result + modifier;
    };

    var decArrayToBaseArray = function(array, base, modifier) {
      var result = [];
      for(var i = 0; i < array.length; i++){
        result.push(decimalToBase(array[i], base,3, modifier));
      }
      return result;
    };

    var arrayToString = function(array, separator) {
      var result = "";
      for(var i = 0; i < array.length; i++){
        result += array[i] + separator;
      }
      return result;
    };

    var getBase = function(type) {
      if(type == "base3"){
        return 3;
      }
      else if(type == "base4"){
        return 4;
      }
      else if(type == "base3plus2"){
        return 3;
      }
      else{
        return "error";
      }
    };

    var getModifier = function(type) {
      if(type == "base3plus2"){
        return 2;
      }
      else{
        return 0;
      }
    };

    var Clicked = function() {
      var type = document.getElementById("type").value;

      var value = document.getElementById("VALUE").value;
      var output = document.getElementById("output");
      output.innerHTML = arrayToString(decArrayToBaseArray(textToArray(value),getBase(type),getModifier),"\xa0\xa0");
    };

  </script>
  </body>
</html>